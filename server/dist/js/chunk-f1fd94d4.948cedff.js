(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1fd94d4"],{"2a6f":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"},{name:"show",rawName:"v-show",value:e.viewSB,expression:"viewSB"}],staticClass:"p-2 mt-2 mb-2 w-11/12 text-xl bg-gray-200 text-gray-800 border-b-2 border-white focus:outline-none",attrs:{type:"text",placeholder:"Search for your school..."},domProps:{value:e.search},on:{keyup:e.searchSchools,input:function(t){t.target.composing||(e.search=t.target.value)}}}),e.viewSB?s("div",e._l(e.results,(function(t){return s("div",{key:t._id},[s("div",{staticClass:"cursor-pointer flex p-2 w-11/12 text-left bg-gray-100 mb-1 text-black border-2",on:{click:function(s){return e.selectSchool(t._id)}}},[s("img",{staticClass:"rounded-full mr-2 w-16 h-16",attrs:{src:t.url}}),s("div",{staticClass:"mr-2"},[s("h1",{staticClass:"text-2xl font-bold",style:"color:"+t.color},[e._v(" "+e._s(t.name)+" ")]),s("p",{staticClass:"text-lg"},[e._v(e._s(t.city)+" "+e._s(t.state))])])])])})),0):s("div",{staticClass:"cursor-pointer flex p-2 w-11/12 text-left bg-gray-100 mb-1 text-black border-2",on:{click:function(t){return e.unselectSchool()}}},[s("img",{staticClass:"rounded-full mr-2 w-16 h-16",attrs:{src:e.selected.url}}),s("div",{staticClass:"mr-2"},[s("h1",{staticClass:"text-2xl font-bold",style:"color:"+e.selected.color},[e._v(" "+e._s(e.selected.name)+" ")]),s("p",{staticClass:"text-lg"},[e._v(e._s(e.selected.city)+" "+e._s(e.selected.state))])])])])},a=[],n=s("c7eb"),o=s("1da1"),c=(s("4e82"),s("b0c0"),s("498a"),s("7db0"),s("d3b7"),s("4de4"),s("caad"),s("2532"),s("ac1f"),s("841c"),s("a434"),{name:"SchoolSelect",props:["value"],data:function(){return{schools:[],search:"",results:[],selected:"",viewSB:!0}},created:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/schools/all");case 2:e.schools=t.sent.data.sort((function(e,t){return e.name.localeCompare(t.name)})),""!=e.$store.state.userData.school.trim(" ")&&(e.selected=e.schools.find((function(t){return t._id===e.$store.state.userData.school})),e.selectSchool(e.selected._id),e.viewSB=!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{searchSchools:function(){var e=this,t=this.schools.filter((function(t){return t.name.toLowerCase().includes(e.search.toLowerCase().trim(" "))}));this.results=t.splice(0,3)},selectSchool:function(e){var t=this.schools.find((function(t){return t._id===e}));this.viewSB=!1,this.selected=t,this.$emit("onSchoolSelect",t)},unselectSchool:function(){this.value=" ",this.viewSB=!0,this.search=""}}}),i=c,l=s("2877"),u=Object(l["a"])(i,r,a,!1,null,null,null);t["a"]=u.exports},3511:function(e,t){var s=TypeError,r=9007199254740991;e.exports=function(e){if(e>r)throw s("Maximum allowed index exceeded");return e}},"4de4":function(e,t,s){"use strict";var r=s("23e7"),a=s("b727").filter,n=s("1dde"),o=n("filter");r({target:"Array",proto:!0,forced:!o},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"59ce":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-2 m-auto mt-2 mb-2 md:m-2 bg-white text-left w-11/12 lexend"},[s("h1",{staticClass:"text-left p-2 text-black text-4xl font-bold"},[e._v("User Settings")]),e._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"}],staticClass:"p-2 m-2 text-black border-2 w-3/4 text-2xl",attrs:{type:"text",disabled:""},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),s("h1",{staticClass:"text-left p-2 text-black text-2xl font-semibold"},[e._v(" Email "),e.user.verified?s("span",{staticClass:"text-green-500 text-sm"},[e._v("Verified "),s("i",{staticClass:"fa-solid fa-square-check"})]):s("span",{staticClass:"text-red-500 text-sm"},[e._v("Unverified "),s("i",{staticClass:"fa-sharp fa-solid fa-square-xmark"})])]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"p-2 m-2 text-black border-2 w-3/4 text-2xl",attrs:{type:"text",disabled:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),s("br"),e.user.verified?e._e():s("button",{staticClass:"p-2 m-2 text-white bg-green-500 text-xl rounded",attrs:{type:"button"},on:{click:e.sendVerificationEmail}},[e._v(" Verify Email ")]),s("h1",{staticClass:"text-left p-2 text-black text-2xl font-semibold"},[e._v("School")]),""!=e.user.school?s("div",[s("a",{attrs:{href:"/schools/view/"+e.school._id}},[s("div",{staticClass:"p-4 w-72 h-72 flex flex-col m-2",style:"background:"+e.school.color},[s("img",{staticClass:"rounded-full w-32 h-32 m-auto mb-2",attrs:{src:e.school.url}}),s("div",{staticClass:"mt-auto"},[s("div",{staticClass:"text-white text-sm md:text-2xl text-left"},[e._v(" "+e._s(e.school.name)+" ")]),s("div",{staticClass:"text-white text-sm text-left"},[e._v(" "+e._s(e.school.address)+" | "+e._s(e.school.city)+" "+e._s(e.school.state)+" ")])])])])]):e._e(),""!=e.user.school?s("span",{staticClass:"p-2"},[e._v("Not your school? Click the dropdown below and type your school.")]):e._e(),s("SchoolSelect",{on:{onSchoolSelect:e.selectSchool}}),e._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"p-2 m-2 text-black border-2 w-3/4 text-2xl",attrs:{type:"password",placeholder:"Enter a school",disabled:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),s("button",{staticClass:"p-2 m-2 bg-green-500 text-white text-2xl",on:{click:function(t){return e.sendPasswordResetEmail()}}},[e._v(" Change Password ")]),s("br"),s("button",{staticClass:"p-2 m-2 bg-green-500 text-white text-2xl rounded",attrs:{type:"button"},on:{click:function(t){return e.update()}}},[e._v(" Update ")]),s("h1",{staticClass:"text-left p-2 text-black text-3xl font-semibold"},[e._v(" Manage Reviews ")]),s("div",{staticClass:"flex grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 overflow-x-auto text-black"},e._l(e.reviews,(function(t){return s("div",{key:t._id,staticClass:"p-2 m-2 border-2 rounded"},[s("h1",{staticClass:"text-xl font-semibold"},[e._v(e._s(t.course))]),s("h1",{staticClass:"text-sm"},[e._v(e._s(t.school))]),s("button",{staticClass:"my-2 bg-blue-600 p-2 rounded text-white mr-2"},[s("a",{attrs:{href:"/reviews/"+t._id}},[e._v(" View ")])]),s("button",{staticClass:"my-2 bg-red-600 p-2 rounded text-white",on:{click:function(s){return e.deleteReview(t._id)}}},[e._v(" Delete ")])])})),0)],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"text-left p-2 text-black text-2xl font-semibold"},[e._v(" Username "),s("br"),s("span",{staticClass:"text-sm"},[e._v("Unfortunately, we cannot change your username at the moment. Please look back for future updates.")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"text-left p-2 text-black text-2xl font-semibold"},[e._v(" Password "),s("br"),s("span",{staticClass:"text-sm"},[e._v("Click on Change Password to recieve a email with a link to change your password.")])])}],n=s("c7eb"),o=s("1da1"),c=(s("4de4"),s("d3b7"),s("7db0"),s("b0c0"),s("a434"),s("2a6f")),i={components:{SchoolSelect:c["a"]},data:function(){return{user:{},reviews:{},schools:{},school:{}}},beforeCreate:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var s,r,a,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return document.title="My Profile - Classrate.org",t.next=3,e.$http.get("/users/current");case 3:return s=t.sent,r=s.data,e.user=r,t.next=8,e.$http.get("/reviews/all");case 8:return a=t.sent,a=a.data.filter((function(e){return e.username===r.username})),t.next=12,e.$http.get("/schools/all");case 12:o=t.sent,e.schools=o.data,""!=e.user.school&&(e.school=e.schools.find((function(t){return t._id===e.user.school}))),e.reviews=a;case 16:case"end":return t.stop()}}),t)})))()},methods:{update:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.put("/users/update",e.user);case 3:e.$store.commit("userData",e.user),location.reload(),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),alert("An error has occured when updating!"),console.log(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},selectSchool:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function s(){return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.user.school=e._id;case 1:case"end":return s.stop()}}),s)})))()},deleteReview:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function s(){var r,a,o,c,i,l,u,d,h;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t.$http.delete("/reviews/delete/".concat(e));case 3:return r=s.sent,a=r.data,o=a,s.next=8,t.$http.get("/courses/all");case 8:return c=s.sent,i=c.data.find((function(e){return e.name===o.course&&e.school_id===o.school_id})),l=i.ratings.find((function(e){return e.data._id===o._id})),i.ratings.splice(i.ratings.indexOf(l),1),s.next=14,t.$http.put("/courses/update/".concat(i._id),i);case 14:return s.next=16,t.$http.get("/teachers/all");case 16:return u=s.sent,d=u.data.find((function(e){return e.name===o.instructor})),h=d.ratings.find((function(e){return e._id===o._id})),d.ratings.splice(d.ratings.indexOf(h),1),s.next=22,t.$http.put("/teachers/update/".concat(d._id),d);case 22:location.reload(),s.next=29;break;case 25:s.prev=25,s.t0=s["catch"](0),alert("An error has occured when deleting!"),console.log(s.t0.message);case 29:case"end":return s.stop()}}),s,null,[[0,25]])})))()},sendVerificationEmail:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return alert("Verification email sent. Please check your inbox."),t.next=3,e.$http.post("/users/email",{email:e.user.email,username:e.user.username});case 3:case"end":return t.stop()}}),t)})))()},sendPasswordResetEmail:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return alert("Password reset email has been sent to your inbox."),t.next=3,e.$http.post("/users/email_preset",{email:e.user.email,username:e.user.username});case 3:case"end":return t.stop()}}),t)})))()}}},l=i,u=(s("846b"),s("2877")),d=Object(u["a"])(l,r,a,!1,null,null,null);t["default"]=d.exports},"7fb8":function(e,t,s){},"846b":function(e,t,s){"use strict";s("7fb8")},a434:function(e,t,s){"use strict";var r=s("23e7"),a=s("7b0b"),n=s("23cb"),o=s("5926"),c=s("07fa"),i=s("3511"),l=s("65f0"),u=s("8418"),d=s("083a"),h=s("1dde"),f=h("splice"),m=Math.max,p=Math.min;r({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var s,r,h,f,x,v,b=a(this),w=c(b),_=n(e,w),g=arguments.length;for(0===g?s=r=0:1===g?(s=0,r=w-_):(s=g-2,r=p(m(o(t),0),w-_)),i(w+s-r),h=l(b,r),f=0;f<r;f++)x=_+f,x in b&&u(h,f,b[x]);if(h.length=r,s<r){for(f=_;f<w-r;f++)x=f+r,v=f+s,x in b?b[v]=b[x]:d(b,v);for(f=w;f>w-r+s;f--)d(b,f-1)}else if(s>r)for(f=w-r;f>_;f--)x=f+r-1,v=f+s-1,x in b?b[v]=b[x]:d(b,v);for(f=0;f<s;f++)b[f+_]=arguments[f+2];return b.length=w-r+s,h}})}}]);
//# sourceMappingURL=chunk-f1fd94d4.948cedff.js.map